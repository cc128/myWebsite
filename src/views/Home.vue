/*
    创建者：cc
    创建时间：2020-07-03 17:27
    模块名称：首页
    备注：xxxx
*/
<template>
    <div class="home">
        <div class="header-box">
            <el-menu class="home-menu" :default-active="activeIndex2" mode="horizontal" :collapse="false" background-color="#545c64" text-color="#fff" active-text-color="#ffd04b">
                <el-menu-item index="/video-call">
                    <div @click="toUrl('/video-call')">
                        <svg t="1593782063546" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7961" width="15" height="15">
                            <path d="M512-150.80359506C144.44527874-150.80359506-150.80359506 144.44527874-150.80359506 512s295.24887381 662.80359506 662.80359506 662.80359506 662.80359506-295.24887381 662.80359506-662.80359506S879.55472126-150.80359506 512-150.80359506z m286.21064321 689.91828818l-421.7841062 241.01948887c-15.06371854 9.0382306-33.14017975 3.01274397-42.17841035-12.05097458-3.01274397-3.01274397-3.01274397-9.0382306-3.01274397-15.06371852V270.98051111c0-6.02548665 0-9.0382306 3.01274397-12.05097457 3.01274397-6.02548665 9.0382306-12.05097457 15.06371855-12.05097457 9.0382306-3.01274397 18.07646122-3.01274397 27.1146918 0l418.77136223 241.01948889c6.02548665 3.01274397 9.0382306 6.02548665 12.05097457 12.05097457 12.05097457 12.05097457 6.02548665 30.12743579-9.0382306 39.16566769z" fill="#ffd04b" p-id="7962" />
                        </svg>
                        &nbsp;
                        <span slot="title">视频语音</span>
                    </div>
                </el-menu-item>
                <!-- <el-menu-item index="/chatroom">
                    <div>
                        <svg t="1593781971376" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6824" width="20" height="20">
                            <path d="M772.693333 662.144c-16.085333 0-25.557333-4.906667-23.552-22.698667 0-15.829333 9.472-19.285333 27.605334-17.322666l17.621333 2.005333c38.272 0 93.312-28.586667 93.312-90.666667V293.546667c0-39.594667-53.034667-79.616-93.312-79.616h-296.192c-40.277333 0-86.613333 21.546667-90.325333 79.616-1.024 15.786667-4.181333 22.272-20.309334 22.272s-22.314667-6.4-22.314666-22.272c0-73.258667 60.416-122.069333 132.949333-122.069334h294.144c74.538667 0 132.992 59.392 132.992 130.688v231.253334c0 71.296-58.453333 130.688-132.992 130.688l-19.626667-1.962667z" fill="#ffd04b" p-id="6825" />
                            <path d="M160.298667 883.882667c-14.08 0-28.16-3.968-40.277334-11.861334a73.472 73.472 0 0 1-34.261333-63.36v-379.776c0-85.162667 70.528-154.453333 157.141333-154.453333h392.277334c86.613333 0 157.141333 69.290667 157.141333 154.453333v203.52c0 85.162667-70.485333 154.453333-157.141333 154.453334h-168.618667c-48.341333 0-94.72 9.898667-139.008 29.696l-134.997333 59.434666c-10.069333 3.925333-20.138667 7.893333-32.256 7.893334z" fill="#ffd04b" p-id="6826" />
                            <path d="M269.226667 579.157333a42.922667 42.922667 0 0 0 43.093333-43.178666 42.922667 42.922667 0 1 0-85.76 0 42.922667 42.922667 0 0 0 42.666667 43.178666z m171.648 0a42.922667 42.922667 0 0 0 43.093333-43.178666 42.922667 42.922667 0 1 0-85.76 0 42.922667 42.922667 0 0 0 42.666667 43.178666z m171.605333 0a42.922667 42.922667 0 0 0 43.136-43.178666 42.922667 42.922667 0 1 0-85.802667 0 42.922667 42.922667 0 0 0 42.666667 43.178666z" fill="#ffd04b" p-id="6827" />
                        </svg>
                        &nbsp;
                        <span slot="title">聊天室</span>
                    </div>
                </el-menu-item> -->
                <!-- <el-menu-item index="/game">
                    <div>
                        <svg t="1593782103720" class="icon" viewBox="0 0 1335 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8908" width="18" height="18">
                            <path d="M1323.319652 646.811826C1280.059362 270.721855 1203.496812 1.142725 960.541681 1.142725c-123.13229 0-186.368 126.47142-296.217971 136.45913C551.17913 127.614145 491.297391 1.142725 368.150261 1.142725 125.165449 1.142725 48.617739 270.721855 8.69658 643.487536-14.617971 843.182377 5.342609 1009.589797 128.489739 1009.589797c173.056 0 179.71942-156.41971 302.866551-229.64313 46.59942-23.29971 149.75629-33.28742 236.29171-36.61171 86.53542 3.32429 189.70713 13.312 236.306551 36.61171 123.14713 73.20858 129.79571 229.64313 302.86655 229.64313 119.808 3.32429 136.45913-163.097971 116.483711-362.777971z m-951.874782-33.28742c-96.50829 0-173.041159-79.872-173.04116-173.056 0-93.198841 76.53287-173.070841 173.04116-173.070841 96.52313 0 173.070841 76.54771 173.07084 173.070841 0 96.50829-79.872 173.056-173.056 173.056z m775.479652-139.78342h-136.459131v136.45913h-66.56v-136.45913h-136.45913v-66.56h136.45913v-133.12h66.56v133.12h136.459131v66.56z" fill="#ffd04b" p-id="8909" />
                            <path d="M271.61229 440.468406c0 26.624 9.98771 49.92371 29.94829 69.89913 16.65113 16.621449 43.27513 29.94829 69.89913 29.94829s49.92371-9.98771 69.899131-29.96313c16.621449-16.63629 29.94829-43.26029 29.948289-69.899131 0-26.609159-9.98771-49.90887-29.96313-69.88429-16.63629-16.63629-43.26029-29.94829-69.89913-29.948289-26.609159 0-49.90887 9.98771-69.88429 29.948289-19.96058 16.65113-29.94829 43.27513-29.94829 69.899131z" fill="#ffd04b" p-id="8910" />
                        </svg>
                        &nbsp;
                        <span slot="title">小游戏</span>
                    </div>
                </el-menu-item> -->
                <el-submenu index="/open-live">
                    <template slot="title">
                        <svg t="1593782063546" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7961" width="15" height="15">
                            <path d="M512-150.80359506C144.44527874-150.80359506-150.80359506 144.44527874-150.80359506 512s295.24887381 662.80359506 662.80359506 662.80359506 662.80359506-295.24887381 662.80359506-662.80359506S879.55472126-150.80359506 512-150.80359506z m286.21064321 689.91828818l-421.7841062 241.01948887c-15.06371854 9.0382306-33.14017975 3.01274397-42.17841035-12.05097458-3.01274397-3.01274397-3.01274397-9.0382306-3.01274397-15.06371852V270.98051111c0-6.02548665 0-9.0382306 3.01274397-12.05097457 3.01274397-6.02548665 9.0382306-12.05097457 15.06371855-12.05097457 9.0382306-3.01274397 18.07646122-3.01274397 27.1146918 0l418.77136223 241.01948889c6.02548665 3.01274397 9.0382306 6.02548665 12.05097457 12.05097457 12.05097457 12.05097457 6.02548665 30.12743579-9.0382306 39.16566769z" fill="#ffd04b" p-id="7962" />
                        </svg>
                        &nbsp;
                        <span slot="title">直播</span>
                    </template>
                    <el-menu-item index="/open-live" @click="toUrl('/open-live')">开直播</el-menu-item>
                    <el-menu-item index="/look-live" @click="toUrl('/look-live')">看直播</el-menu-item>
                </el-submenu>
                <!-- <el-menu-item index="5">
                    <div>
                        <svg t="1593781920693" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5904" width="18" height="18">
                            <path d="M492.212222 391.516591L118.33905 233.468876l374.019444-146.126486 375.92099 146.126486-375.92099 158.047715z m-49.147647 454.762007L91.132317 668.191514v-347.397801l351.932258 154.902851v370.582034z m471.437101-695.453831L530.243139 6.7461a110.874751 110.874751 0 0 0-75.769289 0L69.191403 151.190449c-20.624459 8.849502-37.299553 22.233459-49.87901 39.932463A103.707386 103.707386 0 0 0 0.004389 252.411198v415.414635c0 20.770732 5.265819 40.078736 15.724321 57.265785 10.751048 17.479595 26.036551 30.936688 44.978873 39.713054l383.965992 191.982995a105.901477 105.901477 0 0 0 95.15043 0l87.032291-44.174373a29.254552 29.254552 0 0 0 16.016867-26.109687v-51.634284a21.940914 21.940914 0 0 0-30.936688-20.039368l-70.430334 31.52178V475.696564l344.545483-148.978805 0.21941 63.336105a29.254552 29.254552 0 0 0 29.547097 29.181415l39.566781-0.365682a29.254552 29.254552 0 0 0 29.035143-29.254551c0-45.710237 0-91.493611 0.146272-137.276985 0-22.526005-6.509138-43.077327-19.308004-61.215149a117.018207 117.018207 0 0 0-50.756647-40.298145z" p-id="5905" fill="#ffd04b" />
                            <path d="M894.02349 612.681003H1001.972786a21.940914 21.940914 0 0 1 21.940913 21.940913v47.392374a21.940914 21.940914 0 0 1-21.940913 21.940914h-107.949296V811.9045a21.940914 21.940914 0 0 1-21.940914 21.940914h-47.392374a21.940914 21.940914 0 0 1-21.940914-21.940914V703.955204H694.799992a21.940914 21.940914 0 0 1-21.940913-21.940914v-47.392374a21.940914 21.940914 0 0 1 21.940913-21.940913h107.949296V504.731707a21.940914 21.940914 0 0 1 21.940914-21.940914h47.392374a21.940914 21.940914 0 0 1 21.940914 21.940914v107.949296z" p-id="5906" fill="#ffd04b" />
                        </svg>
                        &nbsp;
                        <span slot="title">建模</span>
                    </div>
                </el-menu-item> -->
                <el-menu-item index="screenCAP">
                    <div @click="toUrl('/screenCAP')">
                        <svg t="1593781920693" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5904" width="18" height="18">
                            <path d="M492.212222 391.516591L118.33905 233.468876l374.019444-146.126486 375.92099 146.126486-375.92099 158.047715z m-49.147647 454.762007L91.132317 668.191514v-347.397801l351.932258 154.902851v370.582034z m471.437101-695.453831L530.243139 6.7461a110.874751 110.874751 0 0 0-75.769289 0L69.191403 151.190449c-20.624459 8.849502-37.299553 22.233459-49.87901 39.932463A103.707386 103.707386 0 0 0 0.004389 252.411198v415.414635c0 20.770732 5.265819 40.078736 15.724321 57.265785 10.751048 17.479595 26.036551 30.936688 44.978873 39.713054l383.965992 191.982995a105.901477 105.901477 0 0 0 95.15043 0l87.032291-44.174373a29.254552 29.254552 0 0 0 16.016867-26.109687v-51.634284a21.940914 21.940914 0 0 0-30.936688-20.039368l-70.430334 31.52178V475.696564l344.545483-148.978805 0.21941 63.336105a29.254552 29.254552 0 0 0 29.547097 29.181415l39.566781-0.365682a29.254552 29.254552 0 0 0 29.035143-29.254551c0-45.710237 0-91.493611 0.146272-137.276985 0-22.526005-6.509138-43.077327-19.308004-61.215149a117.018207 117.018207 0 0 0-50.756647-40.298145z" p-id="5905" fill="#ffd04b" />
                            <path d="M894.02349 612.681003H1001.972786a21.940914 21.940914 0 0 1 21.940913 21.940913v47.392374a21.940914 21.940914 0 0 1-21.940913 21.940914h-107.949296V811.9045a21.940914 21.940914 0 0 1-21.940914 21.940914h-47.392374a21.940914 21.940914 0 0 1-21.940914-21.940914V703.955204H694.799992a21.940914 21.940914 0 0 1-21.940913-21.940914v-47.392374a21.940914 21.940914 0 0 1 21.940913-21.940913h107.949296V504.731707a21.940914 21.940914 0 0 1 21.940914-21.940914h47.392374a21.940914 21.940914 0 0 1 21.940914 21.940914v107.949296z" p-id="5906" fill="#ffd04b" />
                        </svg>
                        &nbsp;
                        <span slot="title">录屏</span>
                    </div>
                </el-menu-item>
            </el-menu>
            <div class="userName">
                <span>{{ $store.state.mYname }}&nbsp;</span>
                <i class="el-icon-edit" @click="setName"></i>
            </div>
        </div>
        <div class="body-box">
            <router-view />
        </div>
    </div>
</template>

<script>
export default {
    data() {
        return {
            mYname:
                sessionStorage.getItem("mYname") ||
                "用户" + ("" + Math.random()).substr(0, 6).replace(".", ""),
            activeIndex2: this.$route.fullPath
        };
    },
    created() {
        this.$store.state.mYname =
            sessionStorage.getItem("mYname") || this.mYname;
        sessionStorage.setItem("mYname", this.mYname);

        //获取自己的id
        this.$socket.on("socketId", socketId => {
            console.log("自己的id", socketId);
            this.$store.state.socketId = socketId;
        });
        // 获取链接房间得用户
        this.$socket.on("videoLinkUserList", list => {
            console.log(list, "可连接用户");
            this.$store.state.videoLinkUserList = list;
        });
    },
    methods: {
        setName() {
            let mYname = prompt("请输入昵称");
            if (mYname) {
                sessionStorage.setItem("mYname", mYname);
                this.$store.state.mYname = mYname;
                this.$socket.emit("setName", {
                    name: mYname,
                    socketId: this.$store.state.socketId
                });
            }
        },
        toUrl(url) {
            if (url === this.activeIndex2) return;
            this.activeIndex2 = url;
            this.$router.push({
                path: url
            });
        }
        //=====================================获取远程数据==================================//
        //=====================================前后端交互====================================//
        //=====================================组件间交互====================================//
        //=====================================其他操作=====================================//
    }
};
</script>



<style lang="scss">
.home {
    height: 100%;
    display: flex;
    display: flex;
    flex-direction: column;
    .el-menu {
        border-right: none;
    }
    .header-box {
        width: 100%;
        min-height: 60px;
        display: flex;
        // box-shadow: 0px 2px 12px 0px rgba(0, 0, 0, 0.1);x
        background: #545c64;
        .userName {
            width: 300px;
            min-height: 60px;
            line-height: 60px;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            .el-icon-edit {
                cursor: pointer;
            }
        }
        .home-menu {
            width: 1200px;
            margin: 0 auto;
        }
    }
    .body-box {
        // width: 1200px;
        // background: red;
        // margin: 20px auto;
        flex: 1;
        background: #ccc;
    }
}
</style>
